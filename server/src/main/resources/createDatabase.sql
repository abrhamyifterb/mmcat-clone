DROP TABLE IF EXISTS job;
CREATE TABLE job (
    id SERIAL PRIMARY KEY,
    json_value JSONB NOT NULL
);

DROP TABLE IF EXISTS schema_morphism;
DROP TABLE IF EXISTS schema_object;
DROP TABLE IF EXISTS schema_category;

CREATE TABLE schema_category (
    id SERIAL PRIMARY KEY,
    json_value JSONB NOT NULL
);

CREATE TABLE schema_object (
    id SERIAL PRIMARY KEY,
    schema_category_id INTEGER NOT NULL,
    json_value JSONB NOT NULL,
    CONSTRAINT fk_schema_category
        FOREIGN KEY (schema_category_id)
            REFERENCES schema_category (id)
            ON DELETE CASCADE
);

CREATE TABLE schema_morphism (
    id SERIAL PRIMARY KEY,
    domain_object_id INTEGER NOT NULL,
    codomain_object_id INTEGER NOT NULL,
    json_value JSONB NOT NULL,
    CONSTRAINT fk_domain_object
        FOREIGN KEY (domain_object_id)
            REFERENCES schema_object (id)
            ON DELETE CASCADE,
    CONSTRAINT fk_codomain_object
        FOREIGN KEY (codomain_object_id)
            REFERENCES schema_object (id)
            ON DELETE CASCADE
);

INSERT INTO job (json_value)
VALUES ('{ "name": "Test job." }');


-- INSERT INTO schema_category (json_value)
-- VALUES ('{"objects":[{"ids":[{"_class":"Id","signatures":[{"ids":[1],"_class":"Signature"}]}],"label":"Customer","superId":{"_class":"Id","signatures":[{"ids":[1],"_class":"Signature"}]},"_class":"SchemaObject","key":{"_class":"Key","value":100}},{"ids":[{"_class":"Id","signatures":[{"ids":[],"_class":"Signature"}]}],"label":"Id","superId":{"_class":"Id","signatures":[{"ids":[],"_class":"Signature"}]},"_class":"SchemaObject","key":{"_class":"Key","value":101}},{"ids":[{"_class":"Id","signatures":[{"ids":[1,-2],"_class":"Signature"},{"ids":[19,3],"_class":"Signature"}]}],"label":"Ordered","superId":{"_class":"Id","signatures":[{"ids":[1,-2],"_class":"Signature"},{"ids":[19,3],"_class":"Signature"}]},"_class":"SchemaObject","key":{"_class":"Key","value":102}},{"ids":[{"_class":"Id","signatures":[{"ids":[19],"_class":"Signature"}]}],"label":"Order","superId":{"_class":"Id","signatures":[{"ids":[19],"_class":"Signature"}]},"_class":"SchemaObject","key":{"_class":"Key","value":103}},{"ids":[{"_class":"Id","signatures":[{"ids":[],"_class":"Signature"}]}],"label":"Number","superId":{"_class":"Id","signatures":[{"ids":[],"_class":"Signature"}]},"_class":"SchemaObject","key":{"_class":"Key","value":104}},{"ids":[{"_class":"Id","signatures":[{"ids":[],"_class":"Signature"}]}],"label":"Array","superId":{"_class":"Id","signatures":[{"ids":[],"_class":"Signature"}]},"_class":"SchemaObject","key":{"_class":"Key","value":105}},{"ids":[{"_class":"Id","signatures":[{"ids":[17],"_class":"Signature"},{"ids":[16,15],"_class":"Signature"},{"ids":[19,-14],"_class":"Signature"}]}],"label":"Contact","superId":{"_class":"Id","signatures":[{"ids":[17],"_class":"Signature"},{"ids":[16,15],"_class":"Signature"},{"ids":[19,-14],"_class":"Signature"}]},"_class":"SchemaObject","key":{"_class":"Key","value":106}},{"ids":[{"_class":"Id","signatures":[{"ids":[],"_class":"Signature"}]}],"label":"Value","superId":{"_class":"Id","signatures":[{"ids":[],"_class":"Signature"}]},"_class":"SchemaObject","key":{"_class":"Key","value":107}},{"ids":[{"_class":"Id","signatures":[{"ids":[16],"_class":"Signature"}]}],"label":"Type","superId":{"_class":"Id","signatures":[{"ids":[16],"_class":"Signature"}]},"_class":"SchemaObject","key":{"_class":"Key","value":108}},{"ids":[{"_class":"Id","signatures":[{"ids":[],"_class":"Signature"}]}],"label":"Name","superId":{"_class":"Id","signatures":[{"ids":[],"_class":"Signature"}]},"_class":"SchemaObject","key":{"_class":"Key","value":109}},{"ids":[{"_class":"Id","signatures":[{"ids":[],"_class":"Signature"}]}],"label":"NestedDoc","superId":{"_class":"Id","signatures":[{"ids":[],"_class":"Signature"}]},"_class":"SchemaObject","key":{"_class":"Key","value":110}},{"ids":[{"_class":"Id","signatures":[{"ids":[],"_class":"Signature"}]}],"label":"PropertyA","superId":{"_class":"Id","signatures":[{"ids":[],"_class":"Signature"}]},"_class":"SchemaObject","key":{"_class":"Key","value":111}},{"ids":[{"_class":"Id","signatures":[{"ids":[],"_class":"Signature"}]}],"label":"PropertyB","superId":{"_class":"Id","signatures":[{"ids":[],"_class":"Signature"}]},"_class":"SchemaObject","key":{"_class":"Key","value":112}},{"ids":[{"_class":"Id","signatures":[{"ids":[],"_class":"Signature"}]}],"label":"PropertyC","superId":{"_class":"Id","signatures":[{"ids":[],"_class":"Signature"}]},"_class":"SchemaObject","key":{"_class":"Key","value":113}},{"ids":[{"_class":"Id","signatures":[{"ids":[10,9],"_class":"Signature"},{"ids":[19,-8],"_class":"Signature"}]}],"label":"Items","superId":{"_class":"Id","signatures":[{"ids":[10,9],"_class":"Signature"},{"ids":[19,-8],"_class":"Signature"}]},"_class":"SchemaObject","key":{"_class":"Key","value":114}},{"ids":[{"_class":"Id","signatures":[{"ids":[],"_class":"Signature"}]}],"label":"Quantity","superId":{"_class":"Id","signatures":[{"ids":[],"_class":"Signature"}]},"_class":"SchemaObject","key":{"_class":"Key","value":115}},{"ids":[{"_class":"Id","signatures":[{"ids":[10],"_class":"Signature"}]}],"label":"Product","superId":{"_class":"Id","signatures":[{"ids":[10],"_class":"Signature"}]},"_class":"SchemaObject","key":{"_class":"Key","value":116}},{"ids":[{"_class":"Id","signatures":[{"ids":[],"_class":"Signature"}]}],"label":"Id","superId":{"_class":"Id","signatures":[{"ids":[],"_class":"Signature"}]},"_class":"SchemaObject","key":{"_class":"Key","value":117}},{"ids":[{"_class":"Id","signatures":[{"ids":[],"_class":"Signature"}]}],"label":"Name","superId":{"_class":"Id","signatures":[{"ids":[],"_class":"Signature"}]},"_class":"SchemaObject","key":{"_class":"Key","value":118}},{"ids":[{"_class":"Id","signatures":[{"ids":[],"_class":"Signature"}]}],"label":"Price","superId":{"_class":"Id","signatures":[{"ids":[],"_class":"Signature"}]},"_class":"SchemaObject","key":{"_class":"Key","value":119}},{"ids":[{"_class":"Id","signatures":[{"ids":[21],"_class":"Signature"},{"ids":[19,-20],"_class":"Signature"}]}],"label":"address","superId":{"_class":"Id","signatures":[{"ids":[21],"_class":"Signature"},{"ids":[19,-20],"_class":"Signature"}]},"_class":"SchemaObject","key":{"_class":"Key","value":120}},{"ids":[{"_class":"Id","signatures":[{"ids":[],"_class":"Signature"}]}],"label":"label","superId":{"_class":"Id","signatures":[{"ids":[],"_class":"Signature"}]},"_class":"SchemaObject","key":{"_class":"Key","value":121}},{"ids":[{"_class":"Id","signatures":[{"ids":[],"_class":"Signature"}]}],"label":"content","superId":{"_class":"Id","signatures":[{"ids":[],"_class":"Signature"}]},"_class":"SchemaObject","key":{"_class":"Key","value":122}},{"ids":[{"_class":"Id","signatures":[{"ids":[],"_class":"Signature"}]}],"label":"text","superId":{"_class":"Id","signatures":[{"ids":[],"_class":"Signature"}]},"_class":"SchemaObject","key":{"_class":"Key","value":123}},{"ids":[{"_class":"Id","signatures":[{"ids":[],"_class":"Signature"}]}],"label":"locale","superId":{"_class":"Id","signatures":[{"ids":[],"_class":"Signature"}]},"_class":"SchemaObject","key":{"_class":"Key","value":124}}],"_class":"SchemaCategory","morphisms":[{"codIdentifier":{"_class":"Key","value":122},"min":"ONE","domIdentifier":{"_class":"Key","value":124},"signature":{"ids":[-24],"_class":"Signature"},"max":"ONE","_class":"SchemaMorphism"},{"codIdentifier":{"_class":"Key","value":122},"min":"ONE","domIdentifier":{"_class":"Key","value":123},"signature":{"ids":[-23],"_class":"Signature"},"max":"ONE","_class":"SchemaMorphism"},{"codIdentifier":{"_class":"Key","value":120},"min":"ONE","domIdentifier":{"_class":"Key","value":122},"signature":{"ids":[-22],"_class":"Signature"},"max":"ONE","_class":"SchemaMorphism"},{"codIdentifier":{"_class":"Key","value":120},"min":"ONE","domIdentifier":{"_class":"Key","value":121},"signature":{"ids":[-21],"_class":"Signature"},"max":"ONE","_class":"SchemaMorphism"},{"codIdentifier":{"_class":"Key","value":103},"min":"ZERO","domIdentifier":{"_class":"Key","value":120},"signature":{"ids":[-20],"_class":"Signature"},"max":"STAR","_class":"SchemaMorphism"},{"codIdentifier":{"_class":"Key","value":103},"min":"ONE","domIdentifier":{"_class":"Key","value":104},"signature":{"ids":[-19],"_class":"Signature"},"max":"ONE","_class":"SchemaMorphism"},{"codIdentifier":{"_class":"Key","value":103},"min":"ONE","domIdentifier":{"_class":"Key","value":105},"signature":{"ids":[-18],"_class":"Signature"},"max":"ONE","_class":"SchemaMorphism"},{"codIdentifier":{"_class":"Key","value":106},"min":"ONE","domIdentifier":{"_class":"Key","value":107},"signature":{"ids":[-17],"_class":"Signature"},"max":"ONE","_class":"SchemaMorphism"},{"codIdentifier":{"_class":"Key","value":108},"min":"ONE","domIdentifier":{"_class":"Key","value":109},"signature":{"ids":[-16],"_class":"Signature"},"max":"ONE","_class":"SchemaMorphism"},{"codIdentifier":{"_class":"Key","value":106},"min":"ZERO","domIdentifier":{"_class":"Key","value":108},"signature":{"ids":[-15],"_class":"Signature"},"max":"STAR","_class":"SchemaMorphism"},{"codIdentifier":{"_class":"Key","value":103},"min":"ZERO","domIdentifier":{"_class":"Key","value":106},"signature":{"ids":[-14],"_class":"Signature"},"max":"STAR","_class":"SchemaMorphism"},{"codIdentifier":{"_class":"Key","value":114},"min":"ONE","domIdentifier":{"_class":"Key","value":115},"signature":{"ids":[-13],"_class":"Signature"},"max":"ONE","_class":"SchemaMorphism"},{"codIdentifier":{"_class":"Key","value":116},"min":"ONE","domIdentifier":{"_class":"Key","value":118},"signature":{"ids":[-12],"_class":"Signature"},"max":"ONE","_class":"SchemaMorphism"},{"codIdentifier":{"_class":"Key","value":116},"min":"ONE","domIdentifier":{"_class":"Key","value":119},"signature":{"ids":[-11],"_class":"Signature"},"max":"ONE","_class":"SchemaMorphism"},{"codIdentifier":{"_class":"Key","value":116},"min":"ONE","domIdentifier":{"_class":"Key","value":117},"signature":{"ids":[-10],"_class":"Signature"},"max":"ONE","_class":"SchemaMorphism"},{"codIdentifier":{"_class":"Key","value":114},"min":"ZERO","domIdentifier":{"_class":"Key","value":116},"signature":{"ids":[-9],"_class":"Signature"},"max":"STAR","_class":"SchemaMorphism"},{"codIdentifier":{"_class":"Key","value":103},"min":"ONE","domIdentifier":{"_class":"Key","value":114},"signature":{"ids":[-8],"_class":"Signature"},"max":"ONE","_class":"SchemaMorphism"},{"codIdentifier":{"_class":"Key","value":110},"min":"ONE","domIdentifier":{"_class":"Key","value":113},"signature":{"ids":[-7],"_class":"Signature"},"max":"ONE","_class":"SchemaMorphism"},{"codIdentifier":{"_class":"Key","value":110},"min":"ONE","domIdentifier":{"_class":"Key","value":112},"signature":{"ids":[-6],"_class":"Signature"},"max":"ONE","_class":"SchemaMorphism"},{"codIdentifier":{"_class":"Key","value":110},"min":"ONE","domIdentifier":{"_class":"Key","value":111},"signature":{"ids":[-5],"_class":"Signature"},"max":"ONE","_class":"SchemaMorphism"},{"codIdentifier":{"_class":"Key","value":103},"min":"ONE","domIdentifier":{"_class":"Key","value":110},"signature":{"ids":[-4],"_class":"Signature"},"max":"ONE","_class":"SchemaMorphism"},{"codIdentifier":{"_class":"Key","value":102},"min":"ONE","domIdentifier":{"_class":"Key","value":103},"signature":{"ids":[-3],"_class":"Signature"},"max":"ONE","_class":"SchemaMorphism"},{"codIdentifier":{"_class":"Key","value":100},"min":"ZERO","domIdentifier":{"_class":"Key","value":102},"signature":{"ids":[-2],"_class":"Signature"},"max":"STAR","_class":"SchemaMorphism"},{"codIdentifier":{"_class":"Key","value":100},"min":"ONE","domIdentifier":{"_class":"Key","value":101},"signature":{"ids":[-1],"_class":"Signature"},"max":"ONE","_class":"SchemaMorphism"},{"codIdentifier":{"_class":"Key","value":101},"min":"ONE","domIdentifier":{"_class":"Key","value":100},"signature":{"ids":[1],"_class":"Signature"},"max":"ONE","_class":"SchemaMorphism"},{"codIdentifier":{"_class":"Key","value":102},"min":"ONE","domIdentifier":{"_class":"Key","value":100},"signature":{"ids":[2],"_class":"Signature"},"max":"ONE","_class":"SchemaMorphism"},{"codIdentifier":{"_class":"Key","value":103},"min":"ONE","domIdentifier":{"_class":"Key","value":102},"signature":{"ids":[3],"_class":"Signature"},"max":"ONE","_class":"SchemaMorphism"},{"codIdentifier":{"_class":"Key","value":110},"min":"ONE","domIdentifier":{"_class":"Key","value":103},"signature":{"ids":[4],"_class":"Signature"},"max":"ONE","_class":"SchemaMorphism"},{"codIdentifier":{"_class":"Key","value":111},"min":"ONE","domIdentifier":{"_class":"Key","value":110},"signature":{"ids":[5],"_class":"Signature"},"max":"ONE","_class":"SchemaMorphism"},{"codIdentifier":{"_class":"Key","value":112},"min":"ONE","domIdentifier":{"_class":"Key","value":110},"signature":{"ids":[6],"_class":"Signature"},"max":"ONE","_class":"SchemaMorphism"},{"codIdentifier":{"_class":"Key","value":113},"min":"ONE","domIdentifier":{"_class":"Key","value":110},"signature":{"ids":[7],"_class":"Signature"},"max":"ONE","_class":"SchemaMorphism"},{"codIdentifier":{"_class":"Key","value":114},"min":"ZERO","domIdentifier":{"_class":"Key","value":103},"signature":{"ids":[8],"_class":"Signature"},"max":"STAR","_class":"SchemaMorphism"},{"codIdentifier":{"_class":"Key","value":116},"min":"ONE","domIdentifier":{"_class":"Key","value":114},"signature":{"ids":[9],"_class":"Signature"},"max":"ONE","_class":"SchemaMorphism"},{"codIdentifier":{"_class":"Key","value":117},"min":"ONE","domIdentifier":{"_class":"Key","value":116},"signature":{"ids":[10],"_class":"Signature"},"max":"ONE","_class":"SchemaMorphism"},{"codIdentifier":{"_class":"Key","value":119},"min":"ONE","domIdentifier":{"_class":"Key","value":116},"signature":{"ids":[11],"_class":"Signature"},"max":"ONE","_class":"SchemaMorphism"},{"codIdentifier":{"_class":"Key","value":118},"min":"ONE","domIdentifier":{"_class":"Key","value":116},"signature":{"ids":[12],"_class":"Signature"},"max":"ONE","_class":"SchemaMorphism"},{"codIdentifier":{"_class":"Key","value":115},"min":"ONE","domIdentifier":{"_class":"Key","value":114},"signature":{"ids":[13],"_class":"Signature"},"max":"ONE","_class":"SchemaMorphism"},{"codIdentifier":{"_class":"Key","value":106},"min":"ZERO","domIdentifier":{"_class":"Key","value":103},"signature":{"ids":[14],"_class":"Signature"},"max":"STAR","_class":"SchemaMorphism"},{"codIdentifier":{"_class":"Key","value":108},"min":"ONE","domIdentifier":{"_class":"Key","value":106},"signature":{"ids":[15],"_class":"Signature"},"max":"ONE","_class":"SchemaMorphism"},{"codIdentifier":{"_class":"Key","value":109},"min":"ONE","domIdentifier":{"_class":"Key","value":108},"signature":{"ids":[16],"_class":"Signature"},"max":"ONE","_class":"SchemaMorphism"},{"codIdentifier":{"_class":"Key","value":107},"min":"ONE","domIdentifier":{"_class":"Key","value":106},"signature":{"ids":[17],"_class":"Signature"},"max":"ONE","_class":"SchemaMorphism"},{"codIdentifier":{"_class":"Key","value":105},"min":"ZERO","domIdentifier":{"_class":"Key","value":103},"signature":{"ids":[18],"_class":"Signature"},"max":"STAR","_class":"SchemaMorphism"},{"codIdentifier":{"_class":"Key","value":104},"min":"ONE","domIdentifier":{"_class":"Key","value":103},"signature":{"ids":[19],"_class":"Signature"},"max":"ONE","_class":"SchemaMorphism"},{"codIdentifier":{"_class":"Key","value":120},"min":"ZERO","domIdentifier":{"_class":"Key","value":103},"signature":{"ids":[20],"_class":"Signature"},"max":"STAR","_class":"SchemaMorphism"},{"codIdentifier":{"_class":"Key","value":121},"min":"ONE","domIdentifier":{"_class":"Key","value":120},"signature":{"ids":[21],"_class":"Signature"},"max":"ONE","_class":"SchemaMorphism"},{"codIdentifier":{"_class":"Key","value":122},"min":"ONE","domIdentifier":{"_class":"Key","value":120},"signature":{"ids":[22],"_class":"Signature"},"max":"ONE","_class":"SchemaMorphism"},{"codIdentifier":{"_class":"Key","value":123},"min":"ONE","domIdentifier":{"_class":"Key","value":122},"signature":{"ids":[23],"_class":"Signature"},"max":"ONE","_class":"SchemaMorphism"},{"codIdentifier":{"_class":"Key","value":124},"min":"ONE","domIdentifier":{"_class":"Key","value":122},"signature":{"ids":[24],"_class":"Signature"},"max":"ONE","_class":"SchemaMorphism"},{"codIdentifier":{"_class":"Key","value":106},"min":"ZERO","domIdentifier":{"_class":"Key","value":109},"signature":{"ids":[-15,-16],"_class":"Signature"},"max":"STAR","_class":"SchemaMorphism"},{"codIdentifier":{"_class":"Key","value":114},"min":"ZERO","domIdentifier":{"_class":"Key","value":118},"signature":{"ids":[-9,-12],"_class":"Signature"},"max":"STAR","_class":"SchemaMorphism"},{"codIdentifier":{"_class":"Key","value":114},"min":"ZERO","domIdentifier":{"_class":"Key","value":119},"signature":{"ids":[-9,-11],"_class":"Signature"},"max":"STAR","_class":"SchemaMorphism"},{"codIdentifier":{"_class":"Key","value":114},"min":"ZERO","domIdentifier":{"_class":"Key","value":117},"signature":{"ids":[-9,-10],"_class":"Signature"},"max":"STAR","_class":"SchemaMorphism"},{"codIdentifier":{"_class":"Key","value":114},"min":"ZERO","domIdentifier":{"_class":"Key","value":104},"signature":{"ids":[8,-19],"_class":"Signature"},"max":"STAR","_class":"SchemaMorphism"},{"codIdentifier":{"_class":"Key","value":117},"min":"ONE","domIdentifier":{"_class":"Key","value":114},"signature":{"ids":[10,9],"_class":"Signature"},"max":"ONE","_class":"SchemaMorphism"},{"codIdentifier":{"_class":"Key","value":119},"min":"ONE","domIdentifier":{"_class":"Key","value":114},"signature":{"ids":[11,9],"_class":"Signature"},"max":"ONE","_class":"SchemaMorphism"},{"codIdentifier":{"_class":"Key","value":118},"min":"ONE","domIdentifier":{"_class":"Key","value":114},"signature":{"ids":[12,9],"_class":"Signature"},"max":"ONE","_class":"SchemaMorphism"},{"codIdentifier":{"_class":"Key","value":109},"min":"ONE","domIdentifier":{"_class":"Key","value":106},"signature":{"ids":[16,15],"_class":"Signature"},"max":"ONE","_class":"SchemaMorphism"},{"codIdentifier":{"_class":"Key","value":104},"min":"ONE","domIdentifier":{"_class":"Key","value":114},"signature":{"ids":[19,-8],"_class":"Signature"},"max":"ONE","_class":"SchemaMorphism"},{"codIdentifier":{"_class":"Key","value":101},"min":"ONE","domIdentifier":{"_class":"Key","value":103},"signature":{"ids":[1,-2,-3],"_class":"Signature"},"max":"ONE","_class":"SchemaMorphism"},{"codIdentifier":{"_class":"Key","value":103},"min":"ZERO","domIdentifier":{"_class":"Key","value":101},"signature":{"ids":[3,2,-1],"_class":"Signature"},"max":"STAR","_class":"SchemaMorphism"}]}');
